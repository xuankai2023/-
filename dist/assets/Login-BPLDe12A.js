var v=Object.defineProperty;var t=(d,e)=>v(d,"name",{value:e,configurable:!0});import{u as j,b as y,r as l,j as s}from"./index-CwuaEBKW.js";import{D as N}from"./method-BeHZdKfH.js";const L=t(({visible:d=!0,onClose:e})=>{const o=j(),{login:h,isLoading:r}=y(),[u,f]=l.useState(""),[m,w]=l.useState(""),[p,n]=l.useState(""),[c,g]=l.useState(!1);l.useEffect(()=>{const a=t(i=>{i.key==="Escape"&&(e?e():o(-1))},"handleKeyDown");return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[e,o]);const x=t(async()=>{var a;if(!u.trim()){n("用户名不能为空");return}if(!m.trim()){n("密码不能为空");return}n(""),(a=document.activeElement)==null||a.blur();try{await h({username:u,password:m})?(e&&e(),setTimeout(()=>{o("/admin",{replace:!0})},100)):n("用户名或密码错误")}catch(i){const b=i instanceof Error?i.message:"登录失败，请检查您的凭据";n(b)}},"handleLogin");return s.jsx(N,{visible:d,onClose:t(()=>{e?e():o(-1)},"onClose"),title:"管理员登录",showCancelButton:!0,confirmButtonText:r?"登录中...":"登录",cancelButtonText:"关闭",onCancel:t(()=>{e?e():o(-1)},"onCancel"),onConfirm:r?void 0:x,className:"tiktok-login-modal",closeOnClickOverlay:!1,confirmButtonColor:"",children:s.jsxs("div",{className:"login-content",children:[p&&s.jsx("div",{className:"error-message",children:p}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"username",children:"Username"}),s.jsx("input",{type:"text",id:"username",className:"form-input",placeholder:"请输入用户名",value:u,onChange:t(a=>f(a.target.value),"onChange"),disabled:r,autoComplete:"username",autoFocus:!0,"aria-label":"Username"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"password",children:"Password"}),s.jsx("input",{type:c?"text":"password",id:"password",className:"form-input",placeholder:"请输入密码",value:m,onChange:t(a=>w(a.target.value),"onChange"),disabled:r,autoComplete:"current-password","aria-label":"Password"}),s.jsx("button",{type:"button",className:"toggle-password-btn",onClick:t(()=>g(!c),"onClick"),disabled:r,"aria-label":c?"Hide password":"Show password",children:c?"Hide":"Show"})]}),s.jsx("button",{type:"button",className:"forgot-password",onClick:t(()=>alert("忘记密码? 请联系管理员"),"onClick"),disabled:r,children:"忘记密码?"})]})})},"Login");export{L as default};
//# sourceMappingURL=Login-BPLDe12A.js.map
