"use client";var ot=Object.defineProperty;var r=(t,e)=>ot(t,"name",{value:e,configurable:!0});import{r as s,R as F}from"./index-C0jzUuew.js";import{u as ge}from"./ContextIsolator-ByVvIAHJ.js";import{I as se,ad as nt,S as st,b as P,f as ze,K as de,ab as rt,P as at,C as ct,q as it,h as lt,m as ut,a3 as oe,i as mt,k as ke,n as Te,s as Ye}from"./Button-By4dS-Fa.js";import{g as ft,R as dt}from"./Skeleton-Dx5twA16.js";import{u as gt}from"./useMergedMask-CDPnbdkM.js";import{R as pe}from"./Sidebar-CQLwbubt.js";import{R as he}from"./RightOutlined-DUxcvS76.js";var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ve.apply(this,arguments)}r(ve,"_extends$7");const ht=r((t,e)=>s.createElement(se,ve({},t,{ref:e,icon:pt})),"RotateLeftOutlined"),vt=s.forwardRef(ht);var wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},we.apply(this,arguments)}r(we,"_extends$6");const Ct=r((t,e)=>s.createElement(se,we({},t,{ref:e,icon:wt})),"RotateRightOutlined"),yt=s.forwardRef(Ct);var xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};function Ce(){return Ce=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ce.apply(this,arguments)}r(Ce,"_extends$5");const bt=r((t,e)=>s.createElement(se,Ce({},t,{ref:e,icon:xt})),"SwapOutlined"),Le=s.forwardRef(bt);var It={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function ye(){return ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ye.apply(this,arguments)}r(ye,"_extends$4");const Et=r((t,e)=>s.createElement(se,ye({},t,{ref:e,icon:It})),"ZoomInOutlined"),St=s.forwardRef(Et);var Nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},xe.apply(this,arguments)}r(xe,"_extends$3");const Mt=r((t,e)=>s.createElement(se,xe({},t,{ref:e,icon:Nt})),"ZoomOutOutlined"),Rt=s.forwardRef(Mt),me=s.createContext(null);function Pt(t){return new Promise(e=>{if(!t){e(!1);return}const o=document.createElement("img");o.onerror=()=>e(!1),o.onload=()=>e(!0),o.src=t})}r(Pt,"isImageValid");function De(){const t=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:e}}r(De,"getClientSize");const ce={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function $t(t,e,o,n){const i=s.useRef(null),a=s.useRef([]),[c,m]=s.useState(ce),d=r(g=>{m(ce),nt(ce,c)||n==null||n({transform:ce,action:g})},"resetTransform"),f=r((g,x)=>{i.current===null&&(a.current=[],i.current=st(()=>{m(w=>{let p=w;return a.current.forEach(C=>{p={...p,...C}}),i.current=null,n==null||n({transform:p,action:x}),p})})),a.current.push({...c,...g})},"updateTransform");return{transform:c,resetTransform:d,updateTransform:f,dispatchZoomChange:r((g,x,w,p,C)=>{const{width:y,height:E,offsetWidth:l,offsetHeight:u,offsetLeft:S,offsetTop:b}=t.current;let I=g,v=c.scale*g;v>o?(v=o,I=o/c.scale):v<e&&(v=C?v:e,I=v/c.scale);const $=w??innerWidth/2,O=p??innerHeight/2,N=I-1,L=N*y*.5,z=N*E*.5,T=N*($-c.x-S),Y=N*(O-c.y-b);let A=c.x-(T-L),R=c.y-(Y-z);if(g<1&&v===1){const X=l*v,H=u*v,{width:k,height:M}=De();X<=k&&H<=M&&(A=0,R=0)}f({x:A,y:R,scale:v},x)},"dispatchZoomChange")}}r($t,"useImageTransform");function je(t,e,o,n){const i=e+o,a=(o-n)/2;if(o>n){if(e>0)return{[t]:a};if(e<0&&i<n)return{[t]:-a}}else if(e<0||i>n)return{[t]:e<0?a:-a};return{}}r(je,"fixPoint");function Xe(t,e,o,n){const{width:i,height:a}=De();let c=null;return t<=i&&e<=a?c={x:0,y:0}:(t>i||e>a)&&(c={...je("x",o,t,i),...je("y",n,e,a)}),c}r(Xe,"getFixScaleEleTransPosition");const te=1,Ot=1;function Lt(t,e,o,n,i,a,c){const{rotate:m,scale:d,x:f,y:h}=i,[g,x]=s.useState(!1),w=s.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),p=r(l=>{!e||l.button!==0||(l.preventDefault(),l.stopPropagation(),w.current={diffX:l.pageX-f,diffY:l.pageY-h,transformX:f,transformY:h},x(!0))},"onMouseDown"),C=r(l=>{o&&g&&a({x:l.pageX-w.current.diffX,y:l.pageY-w.current.diffY},"move")},"onMouseMove"),y=r(()=>{if(o&&g){x(!1);const{transformX:l,transformY:u}=w.current;if(!(f!==l&&h!==u))return;const b=t.current.offsetWidth*d,I=t.current.offsetHeight*d,{left:v,top:$}=t.current.getBoundingClientRect(),O=m%180!==0,N=Xe(O?I:b,O?b:I,v,$);N&&a({...N},"dragRebound")}},"onMouseUp"),E=r(l=>{if(!o||l.deltaY==0)return;const u=Math.abs(l.deltaY/100),S=Math.min(u,Ot);let b=te+S*n;l.deltaY>0&&(b=te/b),c(b,"wheel",l.clientX,l.clientY)},"onWheel");return s.useEffect(()=>{if(e){window.addEventListener("mouseup",y,!1),window.addEventListener("mousemove",C,!1);try{window.top!==window.self&&(window.top.addEventListener("mouseup",y,!1),window.top.addEventListener("mousemove",C,!1))}catch{}}return()=>{var l,u;window.removeEventListener("mouseup",y),window.removeEventListener("mousemove",C);try{(l=window.top)==null||l.removeEventListener("mouseup",y),(u=window.top)==null||u.removeEventListener("mousemove",C)}catch{}}},[o,g,f,h,m,e]),{isMoving:g,onMouseDown:p,onMouseMove:C,onMouseUp:y,onWheel:E}}r(Lt,"useMouseEvent");function He({src:t,isCustomPlaceholder:e,fallback:o}){const[n,i]=s.useState(e?"loading":"normal"),a=s.useRef(!1),c=n==="error";s.useEffect(()=>{let h=!0;return Pt(t).then(g=>{!g&&h&&i("error")}),()=>{h=!1}},[t]),s.useEffect(()=>{e&&!a.current?i("loading"):c&&i("normal")},[t]);const m=r(()=>{i("normal")},"onLoad");return[r(h=>{a.current=!1,n==="loading"&&(h!=null&&h.complete)&&(h.naturalWidth||h.naturalHeight)&&(a.current=!0,m())},"getImgRef"),c&&o?{src:o}:{onLoad:m,src:t},n]}r(He,"useStatus");function ie(t,e){const o=t.x-e.x,n=t.y-e.y;return Math.hypot(o,n)}r(ie,"getDistance");function jt(t,e,o,n){const i=ie(t,o),a=ie(e,n);if(i===0&&a===0)return[t.x,t.y];const c=i/(i+a),m=t.x+c*(e.x-t.x),d=t.y+c*(e.y-t.y);return[m,d]}r(jt,"getCenter");function At(t,e,o,n,i,a,c){const{rotate:m,scale:d,x:f,y:h}=i,[g,x]=s.useState(!1),w=s.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),p=r(l=>{w.current={...w.current,...l}},"updateTouchPointInfo"),C=r(l=>{if(!e)return;l.stopPropagation(),x(!0);const{touches:u=[]}=l;u.length>1?p({point1:{x:u[0].clientX,y:u[0].clientY},point2:{x:u[1].clientX,y:u[1].clientY},eventType:"touchZoom"}):p({point1:{x:u[0].clientX-f,y:u[0].clientY-h},eventType:"move"})},"onTouchStart"),y=r(l=>{const{touches:u=[]}=l,{point1:S,point2:b,eventType:I}=w.current;if(u.length>1&&I==="touchZoom"){const v={x:u[0].clientX,y:u[0].clientY},$={x:u[1].clientX,y:u[1].clientY},[O,N]=jt(S,b,v,$),L=ie(v,$)/ie(S,b);c(L,"touchZoom",O,N,!0),p({point1:v,point2:$,eventType:"touchZoom"})}else I==="move"&&(a({x:u[0].clientX-S.x,y:u[0].clientY-S.y},"move"),p({eventType:"move"}))},"onTouchMove"),E=r(()=>{if(!o)return;if(g&&x(!1),p({eventType:"none"}),n>d)return a({x:0,y:0,scale:n},"touchZoom");const l=t.current.offsetWidth*d,u=t.current.offsetHeight*d,{left:S,top:b}=t.current.getBoundingClientRect(),I=m%180!==0,v=Xe(I?u:l,I?l:u,S,b);v&&a({...v},"dragRebound")},"onTouchEnd");return s.useEffect(()=>{const l=r(u=>{u.preventDefault()},"preventDefault");return o&&e&&window.addEventListener("touchmove",l,{passive:!1}),()=>{window.removeEventListener("touchmove",l)}},[o,e]),{isTouching:g,onTouchStart:C,onTouchMove:y,onTouchEnd:E}}r(At,"useTouchEvent");function zt(t){const{prefixCls:e,icon:o,onClick:n}=t;return s.createElement("button",{className:`${e}-close`,onClick:n},o)}r(zt,"CloseBtn");function kt(t){const{prefixCls:e,showProgress:o,current:n,count:i,showSwitch:a,classNames:c,styles:m,icons:d,image:f,transform:h,countRender:g,actionsRender:x,scale:w,minScale:p,maxScale:C,onActive:y,onFlipY:E,onFlipX:l,onRotateLeft:u,onRotateRight:S,onZoomOut:b,onZoomIn:I,onClose:v,onReset:$}=t,{left:O,right:N,prev:L,next:z,flipY:T,flipX:Y,rotateLeft:A,rotateRight:R,zoomOut:X,zoomIn:H}=d,k=o&&s.createElement("div",{className:`${e}-progress`},g?g(n+1,i):s.createElement("bdi",null,`${n+1} / ${i}`)),M=`${e}-actions-action`,j=r(({type:q,disabled:ee,onClick:fe,icon:re})=>s.createElement("div",{key:q,className:P(M,`${M}-${q}`,{[`${M}-disabled`]:!!ee}),onClick:fe},re),"renderOperation"),Z=a?j({icon:L??O,onClick:r(()=>y(-1),"onClick"),type:"prev",disabled:n===0}):void 0,B=a?j({icon:z??N,onClick:r(()=>y(1),"onClick"),type:"next",disabled:n===i-1}):void 0,G=j({icon:T,onClick:E,type:"flipY"}),U=j({icon:Y,onClick:l,type:"flipX"}),K=j({icon:A,onClick:u,type:"rotateLeft"}),D=j({icon:R,onClick:S,type:"rotateRight"}),_=j({icon:X,onClick:b,type:"zoomOut",disabled:w<=p}),J=j({icon:H,onClick:I,type:"zoomIn",disabled:w===C}),Q=s.createElement("div",{className:P(`${e}-actions`,c.actions),style:m.actions},G,U,K,D,_,J);return s.createElement("div",{className:P(`${e}-footer`,c.footer),style:m.footer},k,x?x(Q,{icons:{prevIcon:Z,nextIcon:B,flipYIcon:G,flipXIcon:U,rotateLeftIcon:K,rotateRightIcon:D,zoomOutIcon:_,zoomInIcon:J},actions:{onActive:y,onFlipY:E,onFlipX:l,onRotateLeft:u,onRotateRight:S,onZoomOut:b,onZoomIn:I,onReset:$,onClose:v},transform:h,current:n,total:i,image:f}):Q)}r(kt,"Footer");function Tt(t){const{prefixCls:e,onActive:o,current:n,count:i,icons:{left:a,right:c,prev:m,next:d}}=t,f=`${e}-switch`;return s.createElement(s.Fragment,null,s.createElement("div",{className:P(f,`${f}-prev`,{[`${f}-disabled`]:n===0}),onClick:r(()=>o(-1),"onClick")},m??a),s.createElement("div",{className:P(f,`${f}-next`,{[`${f}-disabled`]:n===i-1}),onClick:r(()=>o(1),"onClick")},d??c))}r(Tt,"PrevNext");function le(){return le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},le.apply(this,arguments)}r(le,"_extends$2");const Yt=r(({fallback:t,src:e,imgRef:o,...n})=>{const[i,a]=He({src:e,fallback:t});return F.createElement("img",le({ref:r(c=>{o.current=c,i(c)},"ref")},n,a))},"PreviewImage"),Ze=r(t=>{const{prefixCls:e,rootClassName:o,src:n,alt:i,imageInfo:a,fallback:c,movable:m=!0,onClose:d,open:f,afterOpenChange:h,icons:g={},closeIcon:x,getContainer:w,current:p=0,count:C=1,countRender:y,scaleStep:E=.5,minScale:l=1,maxScale:u=50,motionName:S="fade",imageRender:b,imgCommonProps:I,actionsRender:v,onTransform:$,onChange:O,classNames:N={},styles:L={},mousePosition:z,zIndex:T}=t,Y=s.useRef(),A=s.useContext(me),R=A&&C>1,X=A&&C>=1,[H,k]=s.useState(!0),{transform:M,resetTransform:j,updateTransform:Z,dispatchZoomChange:B}=$t(Y,l,u,$),{isMoving:G,onMouseDown:U,onWheel:K}=Lt(Y,m,f,E,M,Z,B),{isTouching:D,onTouchStart:_,onTouchMove:J,onTouchEnd:Q}=At(Y,m,f,l,M,Z,B),{rotate:q,scale:ee}=M;s.useEffect(()=>{H||k(!0)},[H]),s.useEffect(()=>{f||j("close")},[f]);const fe=r(W=>{f&&(ee!==1?Z({x:0,y:0,scale:1},"doubleClick"):B(te+E,"doubleClick",W.clientX,W.clientY))},"onDoubleClick"),re=F.createElement(Yt,le({},I,{width:t.width,height:t.height,imgRef:Y,className:`${e}-img`,alt:i,style:{transform:`translate3d(${M.x}px, ${M.y}px, 0) scale3d(${M.flipX?"-":""}${ee}, ${M.flipY?"-":""}${ee}, 1) rotate(${q}deg)`,transitionDuration:(!H||D)&&"0s"},fallback:c,src:n,onWheel:K,onMouseDown:U,onDoubleClick:fe,onTouchStart:_,onTouchMove:J,onTouchEnd:Q,onTouchCancel:Q})),Ne={url:n,alt:i,...a},Fe=r(()=>{B(te+E,"zoomIn")},"onZoomIn"),Ve=r(()=>{B(te/(te+E),"zoomOut")},"onZoomOut"),Ge=r(()=>{Z({rotate:q+90},"rotateRight")},"onRotateRight"),Ue=r(()=>{Z({rotate:q-90},"rotateLeft")},"onRotateLeft"),Qe=r(()=>{Z({flipX:!M.flipX},"flipX")},"onFlipX"),Je=r(()=>{Z({flipY:!M.flipY},"flipY")},"onFlipY"),Ke=r(()=>{j("reset")},"onReset"),ae=r(W=>{const V=p+W;V>=0&&V<=C-1&&(k(!1),j(W<0?"prev":"next"),O==null||O(V,p))},"onActive"),Me=ze(W=>{if(f){const{keyCode:V}=W;V===de.ESC&&(d==null||d()),R&&(V===de.LEFT?ae(-1):V===de.RIGHT&&ae(1))}});s.useEffect(()=>{if(f)return window.addEventListener("keydown",Me),()=>{window.removeEventListener("keydown",Me)}},[f]);const[qe,Re]=s.useState(!1);F.useEffect(()=>{f&&Re(!0)},[f]);const et=r(W=>{W||Re(!1),h==null||h(W)},"onVisibleChanged"),[Pe,tt]=s.useState(!1);rt(()=>{f&&tt(!0)},[f]);const $e={...L.body};return z&&($e.transformOrigin=`${z.x}px ${z.y}px`),F.createElement(at,{open:Pe,getContainer:w,autoLock:qe},F.createElement(ct,{motionName:S,visible:Pe&&f,motionAppear:!0,motionEnter:!0,motionLeave:!0,onVisibleChanged:et},({className:W,style:V})=>{const Oe={...L.root,...V};return T&&(Oe.zIndex=T),F.createElement("div",{className:P(e,o,N.root,W,{[`${e}-moving`]:G}),style:Oe},F.createElement("div",{className:P(`${e}-mask`,N.mask),style:L.mask,onClick:d}),F.createElement("div",{className:P(`${e}-body`,N.body),style:$e},b?b(re,{transform:M,image:Ne,...A?{current:p}:{}}):re),x!==!1&&x!==null&&F.createElement(zt,{prefixCls:e,icon:x===!0?g.close:x||g.close,onClick:d}),R&&F.createElement(Tt,{prefixCls:e,current:p,count:C,icons:g,onActive:ae}),F.createElement(kt,{prefixCls:e,showProgress:X,current:p,count:C,showSwitch:R,classNames:N,styles:L,image:Ne,transform:M,icons:g,countRender:y,actionsRender:v,scale:ee,minScale:l,maxScale:u,onActive:ae,onFlipY:Je,onFlipX:Qe,onRotateLeft:Ue,onRotateRight:Ge,onZoomOut:Ve,onZoomIn:Fe,onClose:d,onReset:Ke}))}))},"Preview"),be=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function Dt(t){const[e,o]=s.useState({}),n=s.useCallback((a,c)=>(o(m=>({...m,[a]:c})),()=>{o(m=>{const d={...m};return delete d[a],d})}),[]);return[s.useMemo(()=>t?t.map(a=>{if(typeof a=="string")return{data:{src:a}};const c={};return Object.keys(a).forEach(m=>{["src",...be].includes(m)&&(c[m]=a[m])}),{data:c}}):Object.keys(e).reduce((a,c)=>{const{canPreview:m,data:d}=e[c];return m&&a.push({data:d,id:c}),a},[]),[t,e]),n,!!t]}r(Dt,"usePreviewItems");function Ie(){return Ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ie.apply(this,arguments)}r(Ie,"_extends$1");const Xt=r(({previewPrefixCls:t="rc-image-preview",classNames:e,styles:o,children:n,icons:i={},items:a,preview:c,fallback:m})=>{var A;const{open:d,onOpenChange:f,current:h,onChange:g,...x}=c&&typeof c=="object"?c:{},[w,p,C]=Dt(a),[y,E]=ge(0,h),[l,u]=s.useState(!1),{src:S,...b}=((A=w[y])==null?void 0:A.data)||{},[I,v]=ge(!!d,d),$=ze(R=>{v(R),R!==I&&(f==null||f(R,{current:y}))}),[O,N]=s.useState(null),L=s.useCallback((R,X,H,k)=>{const M=C?w.findIndex(j=>j.data.src===X):w.findIndex(j=>j.id===R);E(M<0?0:M),$(!0),N({x:H,y:k}),u(!0)},[w,C]);s.useEffect(()=>{I?l||E(0):u(!1)},[I]);const z=r((R,X)=>{E(R),g==null||g(R,X)},"onInternalChange"),T=r(()=>{$(!1),N(null)},"onPreviewClose"),Y=s.useMemo(()=>({register:p,onPreview:L}),[p,L]);return s.createElement(me.Provider,{value:Y},n,s.createElement(Ze,Ie({"aria-hidden":!I,open:I,prefixCls:t,onClose:T,mousePosition:O,imgCommonProps:b,src:S,fallback:m,icons:i,current:y,count:w.length,onChange:z},x,{classNames:e==null?void 0:e.popup,styles:o==null?void 0:o.popup})))},"Group");let Ae=0;function Ht(t,e){const[o]=s.useState(()=>(Ae+=1,String(Ae))),n=s.useContext(me),i={data:e,canPreview:t};return s.useEffect(()=>{if(n)return n.register(o,i)},[]),s.useEffect(()=>{n&&n.register(o,i)},[t,e]),o}r(Ht,"useRegisterImage");function ne(){return ne=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ne.apply(this,arguments)}r(ne,"_extends");const Se=r(t=>{const{prefixCls:e="rc-image",previewPrefixCls:o=`${e}-preview`,rootClassName:n,className:i,style:a,classNames:c={},styles:m={},width:d,height:f,src:h,alt:g,placeholder:x,fallback:w,preview:p=!0,onClick:C,onError:y,...E}=t,l=s.useContext(me),u=!!p,{src:S,open:b,onOpenChange:I,cover:v,rootClassName:$,...O}=p&&typeof p=="object"?p:{},N=typeof v=="object"&&v.placement&&v.placement||"center",L=typeof v=="object"&&v.coverNode?v.coverNode:v,[z,T]=ge(!!b,b),[Y,A]=s.useState(null),R=r(D=>{T(D),I==null||I(D)},"triggerPreviewOpen"),X=r(()=>{R(!1)},"onPreviewClose"),H=x&&x!==!0,k=S??h,[M,j,Z]=He({src:h,isCustomPlaceholder:H,fallback:w}),B=s.useMemo(()=>{const D={};return be.forEach(_=>{t[_]!==void 0&&(D[_]=t[_])}),D},be.map(D=>t[D])),G=s.useMemo(()=>({...B,src:k}),[k,B]),U=Ht(u,G),K=r(D=>{const _=D.target.getBoundingClientRect(),J=_.x+_.width/2,Q=_.y+_.height/2;l?l.onPreview(U,k,J,Q):(A({x:J,y:Q}),R(!0)),C==null||C(D)},"onPreview");return s.createElement(s.Fragment,null,s.createElement("div",ne({},E,{className:P(e,n,c.root,{[`${e}-error`]:Z==="error"}),onClick:u?K:C,style:{width:d,height:f,...m.root}}),s.createElement("img",ne({},B,{className:P(`${e}-img`,{[`${e}-img-placeholder`]:x===!0},c.image,i),style:{height:f,...m.image,...a},ref:M},j,{width:d,height:f,onError:y})),Z==="loading"&&s.createElement("div",{"aria-hidden":"true",className:`${e}-placeholder`},x),v!==!1&&u&&s.createElement("div",{className:P(`${e}-cover`,c.cover,`${e}-cover-${N}`),style:{display:(a==null?void 0:a.display)==="none"?"none":void 0,...m.cover}},L)),!l&&u&&s.createElement(Ze,ne({"aria-hidden":!z,open:z,prefixCls:o,onClose:X,mousePosition:Y,src:k,alt:g,imageInfo:{width:d,height:f},fallback:w,imgCommonProps:B},O,{classNames:c==null?void 0:c.popup,styles:m==null?void 0:m.popup,rootClassName:P($,n)})))},"ImageInternal");Se.PreviewGroup=Xt;const Be=r((t,e,o,n,i,a,c)=>{const[m]=it("ImagePreview",t==null?void 0:t.zIndex),[d,f]=gt(t==null?void 0:t.mask,e==null?void 0:e.mask,`${o}-preview`);return F.useMemo(()=>{if(!t)return t;const{cover:h,getContainer:g,closeIcon:x,rootClassName:w}=t,{closeIcon:p}=e??{};return{motionName:ft(`${o}-preview`,"fade"),...t,...c?{cover:h??c}:{},icons:a,getContainer:g??i,zIndex:m,closeIcon:x??p,rootClassName:P(n,w),mask:d,blurClassName:f.mask}},[t,e,o,n,i,c,a,m,d,f])},"useMergedPreviewConfig");function Zt(t){return s.isValidElement(t)?[t,void 0]:typeof t=="boolean"||t&&typeof t=="object"?[void 0,t]:[void 0,void 0]}r(Zt,"normalizeMask");function ue(t){const e=s.useMemo(()=>typeof t=="boolean"?t?{}:null:t&&typeof t=="object"?t:{},[t]);return s.useMemo(()=>{if(!e)return[e,"",""];const{open:n,onOpenChange:i,cover:a,actionsRender:c,visible:m,onVisibleChange:d,rootClassName:f,maskClassName:h,mask:g,forceRender:x,destroyOnClose:w,toolbarRender:p,...C}=e;let y;i?y=i:d&&(y=r((u,S)=>{const{current:b}=S||{};b!==void 0?d(u,!u,b):d(u,!u)},"onInternalOpenChange"));const[E,l]=Zt(g);return[{...C,open:n??m,onOpenChange:y,cover:a??E,mask:l,actionsRender:c??p},f,h]},[e])}r(ue,"usePreviewConfig");const _e=r(t=>({position:t||"absolute",inset:0}),"genBoxStyle"),Bt=r(t=>{const{componentCls:e,motionDurationSlow:o,colorTextLightSolid:n}=t;return{[e]:{[`${e}-cover`]:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:n,background:new oe("#000").setA(.3).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${o}`},"&:hover":{[`${e}-cover`]:{opacity:1}},[`${e}-cover-top`]:{inset:"0 0 auto 0",justifyContent:"center"},[`${e}-cover-bottom`]:{inset:"auto 0 0 0",justifyContent:"center"}}}},"genImageCoverStyle"),_t=r(t=>{const{motionEaseOut:e,previewCls:o,motionDurationSlow:n,componentCls:i,colorBgMask:a,marginXL:c,marginSM:m,margin:d,colorTextLightSolid:f,paddingSM:h,paddingLG:g,previewOperationHoverColor:x,previewOperationColorDisabled:w,previewOperationSize:p,zIndexPopup:C}=t,y=new oe(a).setA(.1),E=y.clone().setA(.2),l={position:"absolute",color:f,backgroundColor:y.toRgbString(),borderRadius:"50%",padding:h,outline:0,border:0,cursor:"pointer",transition:`all ${n}`,display:"flex",fontSize:p,"&:hover":{backgroundColor:E.toRgbString()},"&:active":{backgroundColor:y.toRgbString()}};return{[`${i}-preview`]:{textAlign:"center",inset:0,position:"fixed",userSelect:"none",zIndex:C,[`${o}-mask`]:{inset:0,position:"absolute",background:a,[`&${i}-preview-mask-blur`]:{backdropFilter:"blur(4px)"},[`&${i}-preview-mask-hidden`]:{display:"none"}},[`${o}-body`]:{..._e(),"pointer-events":"none",display:"flex",alignItems:"center",justifyContent:"center","> *":{pointerEvents:"auto"}},[`${o}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${n} ${e} 0s`},[`&-moving ${o}-img`]:{cursor:"grabbing"},[`${o}-close`]:{...l,top:m,insetInlineEnd:m},[`${o}-switch`]:{...l,top:"50%",transform:"translateY(-50%)","&-disabled":{"&, &:hover, &:active":{color:w,background:"transparent",cursor:"not-allowed"}},"&-prev":{insetInlineStart:m},"&-next":{insetInlineEnd:m}},[`${o}-footer`]:{position:"absolute",bottom:c,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:t.previewOperationColor,transform:"translateX(-50%)",gap:d},[`${o}-actions`]:{display:"flex",gap:h,padding:`0 ${mt(g)}`,backgroundColor:y.toRgbString(),borderRadius:100,fontSize:p,"&-action":{padding:h,cursor:"pointer",transition:`all ${n}`,display:"flex",[`&:not(${o}-actions-action-disabled):hover`]:{color:x},"&-disabled":{color:w,cursor:"not-allowed"}}}}}},"genImagePreviewStyle"),Wt=r(t=>{const{componentCls:e}=t;return{[e]:{position:"relative",display:"inline-block",[`${e}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${e}-img-placeholder`]:{backgroundColor:t.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${e}-placeholder`]:{..._e()}}}},"genImageStyle"),Ft=r(t=>{const{previewCls:e,motionDurationSlow:o}=t;return{[e]:{"&-fade":{transition:`opacity ${o}`,"&-enter, &-appear":{opacity:0,[`${e}-body`]:{transform:"scale(0)"},"&-active":{opacity:1,[`${e}-body`]:{transform:"scale(1)",transition:`transform ${o}`}}},"&-leave":{opacity:1,"&-active":{opacity:0,[`${e}-body`]:{transform:"scale(0)",transition:`transform ${o}`}}}}}}},"genPreviewMotion"),Vt=r(t=>({zIndexPopup:t.zIndexPopupBase+80,previewOperationColor:new oe(t.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new oe(t.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new oe(t.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:t.fontSizeIcon*1.5}),"prepareComponentToken"),We=lt("Image",t=>{const e=`${t.componentCls}-preview`,o=ut(t,{previewCls:e,imagePreviewSwitchSize:t.controlHeightLG});return[Wt(o),Bt(o),_t(o),Ft(o)]},Vt),Ee={rotateLeft:s.createElement(vt,null),rotateRight:s.createElement(yt,null),zoomIn:s.createElement(St,null),zoomOut:s.createElement(Rt,null),close:s.createElement(dt,null),left:s.createElement(pe,null),right:s.createElement(he,null),flipX:s.createElement(Le,null),flipY:s.createElement(Le,{rotate:90})},Gt=r(({previewPrefixCls:t,preview:e,classNames:o,styles:n,...i})=>{const{getPrefixCls:a,getPopupContainer:c,direction:m,preview:d,classNames:f,styles:h}=ke("image"),g=a("image",t),x=`${g}-preview`,w=Te(g),[p,C]=We(g,w),y=P(p,C,w),[E,l,u]=ue(e),[S,b,I]=ue(d),v=s.useMemo(()=>({...Ee,left:m==="rtl"?s.createElement(he,null):s.createElement(pe,null),right:m==="rtl"?s.createElement(pe,null):s.createElement(he,null)}),[m]),$=Be(E,S,g,y,c,Ee),{mask:O,blurClassName:N}=$??{},L={...i,classNames:o,styles:n},[z,T]=Ye([f,o,{cover:P(I,u),popup:{root:P(b,l),mask:P({[`${g}-preview-mask-hidden`]:!O},N)}}],[h,n],{props:L},{popup:{_default:"root"}});return s.createElement(Se.PreviewGroup,{preview:$,previewPrefixCls:x,icons:v,...i,classNames:z,styles:T})},"InternalPreviewGroup"),Ut=r(t=>{const{prefixCls:e,preview:o,className:n,rootClassName:i,style:a,styles:c,classNames:m,wrapperStyle:d,fallback:f,...h}=t,{getPrefixCls:g,getPopupContainer:x,className:w,style:p,preview:C,styles:y,classNames:E,fallback:l}=ke("image"),u=g("image",e),S=Te(u),[b,I]=We(u,S),v=P(i,b,I,S),$=P(n,b,w),[O,N,L]=ue(o),[z,T,Y]=ue(C),A=Be(O,z,u,v,x,Ee,!0),R={...t,preview:A},X=s.useMemo(()=>({cover:P(Y,L),popup:{root:P(T,N)}}),[N,L,T,Y]),{mask:H,blurClassName:k}=A??{},M=s.useMemo(()=>({mask:P({[`${u}-preview-mask-hidden`]:!H},k)}),[H,u,k]),j=s.useMemo(()=>[E,m,X,{popup:M}],[E,m,X,M]),[Z,B]=Ye(j,[y,{root:d},c],{props:R},{popup:{_default:"root"}}),G={...p,...a},U=f??l;return s.createElement(Se,{prefixCls:u,preview:A||!1,rootClassName:v,className:$,style:G,fallback:U,...h,classNames:Z,styles:B})},"Image");Ut.PreviewGroup=Gt;export{Ut as I};
//# sourceMappingURL=index-Ke7ettjD.js.map
