# æ¥å£æ¥å…¥çŠ¶æ€æ£€æŸ¥

## ğŸ“Š æ€»ä½“çŠ¶æ€

**å½“å‰çŠ¶æ€**: âš ï¸ **å¤§éƒ¨åˆ†æ¥å£å°šæœªæ¥å…¥åç«¯ï¼Œä»åœ¨ä½¿ç”¨ Mock æ•°æ®**

## âœ… å·²é…ç½®ä½†æœªæ¥å…¥çš„æ¨¡å—

### 1. åŸºç¡€è®¾æ–½ âœ…
- [x] Axios è¯·æ±‚å°è£… (`src/utils/request.ts`)
- [x] è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
- [x] Token è®¤è¯æœºåˆ¶
- [x] Vite ä»£ç†é…ç½®
- [x] ç¯å¢ƒå˜é‡é…ç½®

### 2. è®¤è¯æ¨¡å— âŒ (ä½¿ç”¨ Mock æ•°æ®)
**æ–‡ä»¶**: `src/auth/services/authapi.ts`

**å½“å‰çŠ¶æ€**: ä½¿ç”¨ `MOCK_USERS` æ•°ç»„ï¼Œæœªè°ƒç”¨åç«¯ API

**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- [ ] `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- [ ] `POST /api/auth/refresh` - åˆ·æ–° Token
- [ ] `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**ä¿®æ”¹ä½ç½®**:
```typescript
// src/auth/services/authapi.ts
// å½“å‰: ä½¿ç”¨ MOCK_USERS.find() æŸ¥æ‰¾ç”¨æˆ·
// éœ€è¦: æ”¹ä¸ºè°ƒç”¨ api.post('/auth/login', credentials)
```

### 3. å® ç‰©ç®¡ç†æ¨¡å— âŒ (ä½¿ç”¨ Mock æ•°æ®)
**æ–‡ä»¶**: 
- `src/pages/Record/Record.tsx`
- `src/pages/Record/Cat/CatRecord.tsx`
- `src/pages/Record/Dog/DogRecord.tsx`
- `src/pages/Record/Rabbit/RabbitRecord.tsx`
- `src/pages/Record/Fish/FishRecord.tsx`
- `src/pages/Record/Others/OtherRecord.tsx`
- `src/pages/petDetail/petdetail.tsx`

**å½“å‰çŠ¶æ€**: ä» `src/mock/petData.ts` å¯¼å…¥æ•°æ®

**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `GET /api/pets` - è·å–å® ç‰©åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ï¼‰
- [ ] `GET /api/pets/:id` - è·å–å® ç‰©è¯¦æƒ…
- [ ] `POST /api/pets` - åˆ›å»ºå® ç‰©
- [ ] `PUT /api/pets/:id` - æ›´æ–°å® ç‰©ä¿¡æ¯
- [ ] `DELETE /api/pets/:id` - åˆ é™¤å® ç‰©

**ä¿®æ”¹ä½ç½®**:
```typescript
// src/pages/Record/Record.tsx
// å½“å‰: import { petRecords, petTypes } from '../../mock/petData';
// éœ€è¦: 
//   useEffect(() => {
//     api.get('/pets').then(setPetRecords);
//   }, []);
```

### 4. è®¢å•ç®¡ç†æ¨¡å— âŒ (ä½¿ç”¨ Mock æ•°æ®)
**æ–‡ä»¶**:
- `src/pages/Order/OrderPage.tsx`
- `src/pages/orderdetail/orderdetail.tsx`
- `src/pages/Order/edit/editdetail.tsx`
- `src/components/Admin/OrderTable.tsx`
- `src/components/Admin/OrderListSection.tsx`
- `src/components/Admin/MainContent/MainContent.tsx`

**å½“å‰çŠ¶æ€**: ä» `src/mock/orderData.ts` å¯¼å…¥æ•°æ®

**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `GET /api/orders` - è·å–è®¢å•åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ã€åˆ†é¡µã€æ’åºï¼‰
- [ ] `GET /api/orders/:id` - è·å–è®¢å•è¯¦æƒ…
- [ ] `POST /api/orders` - åˆ›å»ºè®¢å•
- [ ] `PUT /api/orders/:id` - æ›´æ–°è®¢å•
- [ ] `PUT /api/orders/:id/status` - æ›´æ–°è®¢å•çŠ¶æ€
- [ ] `DELETE /api/orders/:id` - åˆ é™¤è®¢å•

**ä¿®æ”¹ä½ç½®**:
```typescript
// src/pages/Order/OrderPage.tsx
// å½“å‰: import { allOrders } from '../../mock/orderData';
// éœ€è¦:
//   useEffect(() => {
//     api.get('/orders', { params: { page, pageSize, status } })
//       .then(data => setOrders(data.items));
//   }, [page, status]);
```

### 5. ç–«è‹—è®°å½•æ¨¡å— âŒ (ä½¿ç”¨ Mock æ•°æ®)
**æ–‡ä»¶**: `src/pages/VaccinationRecords/VaccinationRecords.tsx`

**å½“å‰çŠ¶æ€**: ä» `src/mock/petData.ts` å¯¼å…¥æ•°æ®

**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `GET /api/vaccine-records` - è·å–ç–«è‹—è®°å½•åˆ—è¡¨
- [ ] `GET /api/vaccine-records/:id` - è·å–ç–«è‹—è®°å½•è¯¦æƒ…
- [ ] `POST /api/vaccine-records` - åˆ›å»ºç–«è‹—è®°å½•
- [ ] `PUT /api/vaccine-records/:id` - æ›´æ–°ç–«è‹—è®°å½•
- [ ] `DELETE /api/vaccine-records/:id` - åˆ é™¤ç–«è‹—è®°å½•

### 6. æœåŠ¡è®°å½•æ¨¡å— âŒ (ä½¿ç”¨ Mock æ•°æ®)
**å½“å‰çŠ¶æ€**: å¯èƒ½ä½¿ç”¨ Mock æ•°æ®

**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `GET /api/service-records` - è·å–æœåŠ¡è®°å½•åˆ—è¡¨
- [ ] `GET /api/service-records/:id` - è·å–æœåŠ¡è®°å½•è¯¦æƒ…
- [ ] `POST /api/service-records` - åˆ›å»ºæœåŠ¡è®°å½•
- [ ] `PUT /api/service-records/:id` - æ›´æ–°æœåŠ¡è®°å½•
- [ ] `DELETE /api/service-records/:id` - åˆ é™¤æœåŠ¡è®°å½•

### 7. å¯„å…»è®°å½•æ¨¡å— âŒ (ä½¿ç”¨ Mock æ•°æ®)
**æ–‡ä»¶**: 
- `src/pages/BoardingRecords/BoardingRecordsPage.tsx`
- `src/Store/board.ts`

**å½“å‰çŠ¶æ€**: ä½¿ç”¨ `loadMockData()` åŠ è½½ Mock æ•°æ®

**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `GET /api/boarding-records` - è·å–å¯„å…»è®°å½•åˆ—è¡¨
- [ ] `GET /api/boarding-records/:id` - è·å–å¯„å…»è®°å½•è¯¦æƒ…
- [ ] `POST /api/boarding-records` - åˆ›å»ºå¯„å…»è®°å½•
- [ ] `PUT /api/boarding-records/:id` - æ›´æ–°å¯„å…»è®°å½•
- [ ] `DELETE /api/boarding-records/:id` - åˆ é™¤å¯„å…»è®°å½•

### 8. è´¦å•åˆ†ææ¨¡å— âŒ (ä½¿ç”¨ Mock æ•°æ®)
**æ–‡ä»¶**: `src/components/BillAnalysis/BillAnalysis.tsx`

**å½“å‰çŠ¶æ€**: ä½¿ç”¨ `mockBillData` æ•°ç»„

**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `GET /api/bills` - è·å–è´¦å•åˆ—è¡¨
- [ ] `GET /api/bills/analysis` - è·å–è´¦å•åˆ†ææ•°æ®
- [ ] `GET /api/bills/statistics` - è·å–è´¦å•ç»Ÿè®¡

### 9. AI èŠå¤©æ¨¡å— âš ï¸ (è°ƒç”¨ç¬¬ä¸‰æ–¹ APIï¼Œéåç«¯)
**æ–‡ä»¶**: 
- `src/services/aiService.ts`
- `src/components/AIChat/AIChat.tsx`

**å½“å‰çŠ¶æ€**: ç›´æ¥è°ƒç”¨ DeepSeek API (`https://api.deepseek.com/v1/chat/completions`)

**è¯´æ˜**: 
- å½“å‰ç›´æ¥è°ƒç”¨ç¬¬ä¸‰æ–¹ AI æœåŠ¡ï¼Œä¸ç»è¿‡åç«¯
- å¦‚æœéœ€è¦é€šè¿‡åç«¯ä»£ç†ï¼Œéœ€è¦æ¥å…¥:
  - [ ] `POST /api/chat/messages` - å‘é€æ¶ˆæ¯ï¼ˆæµå¼å“åº”ï¼‰
  - [ ] `POST /api/chat/sessions` - åˆ›å»ºä¼šè¯
  - [ ] `GET /api/chat/sessions` - è·å–ä¼šè¯åˆ—è¡¨
  - [ ] `GET /api/chat/sessions/:id/messages` - è·å–æ¶ˆæ¯å†å²
  - [ ] `DELETE /api/chat/sessions/:id` - åˆ é™¤ä¼šè¯

**å½“å‰èŠå¤©å†å²**: å­˜å‚¨åœ¨ `localStorage`ï¼ŒæœªåŒæ­¥åˆ°åç«¯

### 10. ç”¨æˆ·ç®¡ç†æ¨¡å— âŒ (å¯èƒ½ä½¿ç”¨ Mock æ•°æ®)
**éœ€è¦æ¥å…¥çš„æ¥å£**:
- [ ] `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- [ ] `GET /api/users/:id` - è·å–ç”¨æˆ·è¯¦æƒ…
- [ ] `POST /api/users` - åˆ›å»ºç”¨æˆ·
- [ ] `PUT /api/users/:id` - æ›´æ–°ç”¨æˆ·
- [ ] `DELETE /api/users/:id` - åˆ é™¤ç”¨æˆ·

## ğŸ“ æ¥å…¥æ­¥éª¤å»ºè®®

### ç¬¬ä¸€æ­¥ï¼šè®¤è¯æ¨¡å—ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
1. ä¿®æ”¹ `src/auth/services/authapi.ts`
2. å°† `MOCK_USERS` æŸ¥æ‰¾é€»è¾‘æ”¹ä¸º API è°ƒç”¨
3. æµ‹è¯•ç™»å½•ã€ç™»å‡ºã€Token åˆ·æ–°åŠŸèƒ½

### ç¬¬äºŒæ­¥ï¼šå® ç‰©ç®¡ç†æ¨¡å—
1. åˆ›å»º `src/api/petApi.ts` å°è£…å® ç‰©ç›¸å…³æ¥å£
2. ä¿®æ”¹ `src/pages/Record/Record.tsx` ä½¿ç”¨ API
3. ä¿®æ”¹å„ä¸ªå® ç‰©ç±»å‹é¡µé¢ä½¿ç”¨ API

### ç¬¬ä¸‰æ­¥ï¼šè®¢å•ç®¡ç†æ¨¡å—
1. åˆ›å»º `src/api/orderApi.ts` å°è£…è®¢å•ç›¸å…³æ¥å£
2. ä¿®æ”¹è®¢å•ç›¸å…³é¡µé¢ä½¿ç”¨ API
3. å®ç°ç­›é€‰ã€åˆ†é¡µã€æ’åºåŠŸèƒ½

### ç¬¬å››æ­¥ï¼šå…¶ä»–ä¸šåŠ¡æ¨¡å—
1. ç–«è‹—è®°å½•
2. æœåŠ¡è®°å½•
3. å¯„å…»è®°å½•
4. è´¦å•åˆ†æ

### ç¬¬äº”æ­¥ï¼šèŠå¤©æ¨¡å—ï¼ˆå¯é€‰ï¼‰
å¦‚æœéœ€è¦å°†èŠå¤©åŠŸèƒ½æ¥å…¥åç«¯ï¼Œéœ€è¦ï¼š
1. ä¿®æ”¹ `aiService.ts` è°ƒç”¨åç«¯æ¥å£è€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ DeepSeek
2. å°†èŠå¤©å†å²ä» `localStorage` è¿ç§»åˆ°åç«¯æ•°æ®åº“

## ğŸ”§ å¿«é€Ÿæ¥å…¥æ¨¡æ¿

### åˆ›å»º API æœåŠ¡æ–‡ä»¶ç¤ºä¾‹

```typescript
// src/api/petApi.ts
import { api } from '../utils/request';

export interface Pet {
  id: string;
  name: string;
  breed: string;
  type: string;
  // ... å…¶ä»–å­—æ®µ
}

export interface GetPetsParams {
  page?: number;
  pageSize?: number;
  type?: string;
  keyword?: string;
}

export const petApi = {
  // è·å–å® ç‰©åˆ—è¡¨
  getPets: (params?: GetPetsParams) => 
    api.get<{ items: Pet[]; total: number; page: number; pageSize: number }>('/pets', { params }),
  
  // è·å–å® ç‰©è¯¦æƒ…
  getPetById: (id: string) => 
    api.get<Pet>(`/pets/${id}`),
  
  // åˆ›å»ºå® ç‰©
  createPet: (data: Partial<Pet>) => 
    api.post<Pet>('/pets', data),
  
  // æ›´æ–°å® ç‰©
  updatePet: (id: string, data: Partial<Pet>) => 
    api.put<Pet>(`/pets/${id}`, data),
  
  // åˆ é™¤å® ç‰©
  deletePet: (id: string) => 
    api.delete(`/pets/${id}`),
};
```

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```typescript
// src/pages/Record/Record.tsx
import { useEffect, useState } from 'react';
import { petApi, Pet } from '../../api/petApi';

function Record() {
  const [pets, setPets] = useState<Pet[]>([]);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    const loadPets = async () => {
      setLoading(true);
      try {
        const data = await petApi.getPets({ page: 1, pageSize: 10 });
        setPets(data.items);
      } catch (error) {
        console.error('åŠ è½½å® ç‰©åˆ—è¡¨å¤±è´¥:', error);
      } finally {
        setLoading(false);
      }
    };
    
    loadPets();
  }, []);

  // ... å…¶ä»–ä»£ç 
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é”™è¯¯å¤„ç†**: æ‰€æœ‰ API è°ƒç”¨éƒ½åº”è¯¥æœ‰é”™è¯¯å¤„ç†
2. **åŠ è½½çŠ¶æ€**: æ˜¾ç¤ºåŠ è½½çŠ¶æ€æå‡ç”¨æˆ·ä½“éªŒ
3. **æ•°æ®ç¼“å­˜**: è€ƒè™‘ä½¿ç”¨ React Query æˆ– SWR è¿›è¡Œæ•°æ®ç¼“å­˜
4. **ç±»å‹å®‰å…¨**: ä¸ºæ‰€æœ‰ API å“åº”å®šä¹‰ TypeScript ç±»å‹
5. **åˆ†é¡µå¤„ç†**: åˆ—è¡¨æ¥å£éœ€è¦æ­£ç¡®å¤„ç†åˆ†é¡µ
6. **ç­›é€‰å’Œæ’åº**: ç¡®ä¿ç­›é€‰å’Œæ’åºå‚æ•°æ­£ç¡®ä¼ é€’

## ğŸ“‹ æ£€æŸ¥æ¸…å•

åœ¨æ¥å…¥æ¯ä¸ªæ¨¡å—æ—¶ï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] API æœåŠ¡æ–‡ä»¶å·²åˆ›å»º
- [ ] TypeScript ç±»å‹å·²å®šä¹‰
- [ ] é”™è¯¯å¤„ç†å·²å®ç°
- [ ] åŠ è½½çŠ¶æ€å·²æ·»åŠ 
- [ ] ç»„ä»¶å·²æ›´æ–°ä½¿ç”¨ API
- [ ] Mock æ•°æ®å¯¼å…¥å·²ç§»é™¤
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] è¾¹ç•Œæƒ…å†µå·²å¤„ç†ï¼ˆç©ºæ•°æ®ã€é”™è¯¯ç­‰ï¼‰

